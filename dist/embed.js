(function(){"use strict";console.log("[Enhancements Core] Initializing...");const N=new Map;let b=null,H=null;const J=new Set,R=new Map,y={register(e){try{if(!e||typeof e!="object"){const n="Invalid app: must be an object";return console.error("[App Manager] Registration failed:",n),R.set("unknown",{error:n,timestamp:new Date}),!1}const t=e.id||"unknown";if(!e.id||!e.name||!e.init||!e.mount||!e.unmount){const n=`Invalid app interface for "${e.name||t}". Required: id, name, init, mount, unmount`;return console.error("[App Manager] Registration failed:",n),R.set(t,{error:n,app:e.name||t,timestamp:new Date}),!1}return N.has(e.id)?(console.warn(`[App Manager] App "${e.name}" (${e.id}) is already registered. Skipping.`),!1):(N.set(e.id,e),console.log(`[App Manager] âœ“ Registered app: ${e.name} (${e.id})`),!0)}catch(t){const n=e?.id||"unknown",s=e?.name||n;return console.error(`[App Manager] Unexpected error registering "${s}":`,t),R.set(n,{error:t.message,app:s,timestamp:new Date}),!1}},getApps(){return Array.from(N.values())},getFailedApps(){return Array.from(R.entries()).map(([e,t])=>({id:e,...t}))},getFirstAvailableApp(){const e=this.getApps();return e.length>0?e[0].id:null},async switchTo(e){const t=N.get(e);if(!t)return console.error(`[App Manager] App not found: ${e}`),!1;try{if(!J.has(e)){console.log(`[App Manager] Initializing: ${t.name}`);const r={Monaco:X,API:G,Storage:v,UI:S,DOM:m,Overlay:z,LoadingOverlay:L,FileImport:Q,Formatter:K};await t.init(r),J.add(e)}if(b&&(console.log(`[App Manager] Unmounting: ${b.name}`),z.clearAppControls(),await b.unmount(),b.getState)){const r=b.getState();v.setAppState(b.id,r)}const n=document.getElementById("file-drop-zone"),s=n?.parentElement;let i=!1;return H&&(n&&s&&(s.removeChild(n),i=!0),H.innerHTML=""),console.log(`[App Manager] Mounting: ${t.name}`),await t.mount(H),b=t,i&&n&&H&&(H.appendChild(n),n.style.display="none",n.style.pointerEvents="none",n.style.visibility="hidden"),setTimeout(()=>{y.notifyResize();const r=document.getElementById("file-drop-zone");if(r){const o=window.getComputedStyle(r);(o.display!=="none"||o.pointerEvents!=="none")&&(r.style.display="none",r.style.pointerEvents="none",r.style.visibility="hidden")}},150),v.setCommonState({lastActiveApp:e}),z.updateAppSwitcher(),console.log(`[App Manager] Switched to: ${t.name}`),!0}catch(n){return console.error(`[App Manager] Failed to switch to ${e}:`,n),S.showToast(`Failed to load ${t.name}: ${n.message}`,"error"),!1}},getCurrentApp(){return b},notifyResize(){b&&typeof b.onResize=="function"&&b.onResize()},setContainer(e){H=e}};let q=!1,Y=[];const X={async init(){return q?!0:new Promise((e,t)=>{if(console.log("[Monaco] Initializing..."),typeof window.monacoRequire>"u"){t(new Error("Monaco require not found"));return}window.monacoRequire.config({paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.44.0/min/vs"}}),window.monacoRequire(["vs/editor/editor.main"],function(){console.log("[Monaco] Initialized successfully"),q=!0,Y.forEach(n=>n()),Y=[],e(!0)},function(n){console.error("[Monaco] Failed to initialize:",n),t(n)})})},isReady(){return q},onReady(e){q?e():Y.push(e)},get(){return window.monaco}},G={parseFormHTML(e){const n=new DOMParser().parseFromString(e,"text/html"),s={csrf_token:"",fields:{}},i=n.querySelector('input[name="csrf_token"]');return i&&(s.csrf_token=i.value),{doc:n,data:s}},buildMultipartBody(e){const t="----WebKitFormBoundary"+Math.random().toString(36).substring(2,15);let n="";return Object.entries(e).forEach(([s,i])=>{n+=`--${t}\r
`,n+=`Content-Disposition: form-data; name="${s}"\r
\r
`,n+=`${i}\r
`}),n+=`--${t}\r
`,n+=`Content-Disposition: form-data; name="deki_buttons[submit][submit]"\r
\r
`,n+=`submit\r
`,n+=`--${t}--\r
`,{body:n,boundary:t}},async fetch(e,t={}){return fetch(e,{credentials:"include",...t})}},M="expertEnhancements",v={getCommonState(){try{const e=localStorage.getItem(`${M}:common`);return e?JSON.parse(e):{}}catch(e){return console.warn("[Storage] Failed to get common state:",e),{}}},setCommonState(e){try{const n={...this.getCommonState(),...e};localStorage.setItem(`${M}:common`,JSON.stringify(n))}catch(t){console.warn("[Storage] Failed to set common state:",t)}},getAppState(e){try{const t=localStorage.getItem(`${M}:app:${e}`);return t?JSON.parse(t):null}catch(t){return console.warn(`[Storage] Failed to get state for ${e}:`,t),null}},setAppState(e,t){try{localStorage.setItem(`${M}:app:${e}`,JSON.stringify(t))}catch(n){console.warn(`[Storage] Failed to set state for ${e}:`,n)}},clearAppState(e){try{localStorage.removeItem(`${M}:app:${e}`)}catch(t){console.warn(`[Storage] Failed to clear state for ${e}:`,t)}},getFormatterSettings(){try{const e=localStorage.getItem(`${M}:formatter`),t={formatOnSave:!0,indentStyle:"spaces",indentSize:2,quoteStyle:"single",cssSettings:{parser:"css"},htmlSettings:{parser:"html"}};return e?{...t,...JSON.parse(e)}:t}catch(e){return console.warn("[Storage] Failed to get formatter settings:",e),{formatOnSave:!0,indentStyle:"spaces",indentSize:2,quoteStyle:"single",cssSettings:{parser:"css"},htmlSettings:{parser:"html"}}}},setFormatterSettings(e){try{localStorage.setItem(`${M}:formatter`,JSON.stringify(e))}catch(t){console.warn("[Storage] Failed to set formatter settings:",t)}}},S={_toastState:{activeToasts:[],toastQueue:[],maxToasts:3,toastIdCounter:0,lifecycleTimeout:null,isProcessing:!1},showToast(e,t="info",n=4e3){if(!document.getElementById("expert-enhancements-overlay")){console.warn("[UI] Overlay not found, cannot show toast");return}const i={id:++this._toastState.toastIdCounter,text:e,type:t,duration:n};this._toastState.toastQueue.push(i),this._processToastLifecycle()},_processToastLifecycle(){this._toastState.lifecycleTimeout&&clearTimeout(this._toastState.lifecycleTimeout),this._toastState.lifecycleTimeout=setTimeout(()=>{requestAnimationFrame(()=>{requestAnimationFrame(()=>{if(!this._toastState.isProcessing){this._toastState.isProcessing=!0;try{this._cleanupDismissedToasts(),this._processToastQueue(),this._updateToastUI()}finally{this._toastState.isProcessing=!1}}})})},50)},_cleanupDismissedToasts(){this._toastState.activeToasts.filter(t=>t.state==="dismissed").forEach(t=>{t.element&&t.element.parentElement&&t.element.remove();const n=this._toastState.activeToasts.indexOf(t);n!==-1&&this._toastState.activeToasts.splice(n,1)})},_processToastQueue(){const e=this._toastState.activeToasts.filter(t=>t.state!=="dismissing").length;for(;this._toastState.toastQueue.length>0&&e+this._toastState.activeToasts.filter(t=>t.state==="rendering").length<this._toastState.maxToasts;){const t=this._toastState.toastQueue.shift();this._renderToastElement(t)}},_updateToastUI(){this._repositionToasts(),this._updateDismissAllButton()},_renderToastElement(e){const t=document.getElementById("expert-enhancements-overlay");if(!t)return;const n={success:"rgba(34, 197, 94, 0.8)",warning:"rgba(251, 146, 60, 0.8)",error:"rgba(239, 68, 68, 0.8)",info:"rgba(59, 130, 246, 0.8)"},s=n[e.type]||n.info,i=document.createElement("div");i.className="enhancements-toast",i.dataset.toastId=e.id;const r=document.createElement("span");r.textContent=e.text,r.style.cssText=`
                flex: 1;
                margin-right: 8px;
            `;const o=document.createElement("button");o.innerHTML="Ã—",o.style.cssText=`
                background: none;
                border: none;
                color: white;
                font-size: 20px;
                font-weight: bold;
                cursor: pointer;
                padding: 0;
                width: 20px;
                height: 20px;
                display: flex;
                align-items: center;
                justify-content: center;
                opacity: 0.8;
                transition: opacity 0.2s;
            `,o.onmouseover=()=>o.style.opacity="1",o.onmouseout=()=>o.style.opacity="0.8",o.onclick=()=>this._requestDismissToast(e.id),i.appendChild(r),i.appendChild(o);const d=1e4+this._toastState.activeToasts.length;if(i.style.cssText=`
                position: absolute;
                right: 20px;
                background: ${s};
                color: white;
                padding: 12px 16px;
                border-radius: 6px;
                box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
                z-index: ${d};
                font-size: 14px;
                display: flex;
                align-items: center;
                gap: 8px;
                max-width: 400px;
                pointer-events: auto;
                animation: slideDown 0.5s ease-out;
                transition: bottom 0.5s ease-out;
            `,!document.getElementById("enhancements-toast-style")){const a=document.createElement("style");a.id="enhancements-toast-style",a.textContent=`
                    @keyframes slideDown {
                        from {
                            opacity: 0;
                            transform: translateY(-120%);
                        }
                        to {
                            opacity: 1;
                            transform: translateY(0);
                        }
                    }

                    @keyframes slideOutBottom {
                        from {
                            opacity: 1;
                            transform: translateY(0);
                        }
                        to {
                            opacity: 0;
                            transform: translateY(150%);
                        }
                    }
                `,document.head.appendChild(a)}t.appendChild(i);const c={id:e.id,element:i,timeoutId:null,state:"rendering"};this._toastState.activeToasts.push(c),setTimeout(()=>{const a=this._toastState.activeToasts.find(p=>p.id===e.id);a&&a.state==="rendering"&&(a.state="active",a.timeoutId=setTimeout(()=>{this._requestDismissToast(e.id)},e.duration))},500)},_requestDismissToast(e){const t=this._toastState.activeToasts.find(n=>n.id===e);t&&(t.state==="dismissing"||t.state==="dismissed"||(t.timeoutId&&(clearTimeout(t.timeoutId),t.timeoutId=null),t.state="dismissing",t.element.style.animation="slideOutBottom 0.5s ease-in forwards",setTimeout(()=>{const n=this._toastState.activeToasts.find(s=>s.id===e);n&&n.state==="dismissing"&&(n.state="dismissed",this._processToastLifecycle())},500)))},_requestDismissAllToasts(){this._toastState.activeToasts.filter(t=>t.state!=="dismissing"&&t.state!=="dismissed").map(t=>t.id).forEach(t=>this._requestDismissToast(t)),this._toastState.toastQueue=[]},_repositionToasts(){let e=20;this._toastState.activeToasts.forEach((t,n)=>{t.element.style.bottom=`${e}px`,t.element.style.zIndex=1e4+n;const s=t.element.offsetHeight;e+=s+10})},_updateDismissAllButton(){const e=document.getElementById("expert-enhancements-overlay");if(!e)return;let t=document.getElementById("enhancements-dismiss-all");const n=this._toastState.activeToasts.filter(s=>s.state!=="dismissing"&&s.state!=="dismissed");if(n.length>=2){if(t||(t=document.createElement("button"),t.id="enhancements-dismiss-all",t.textContent="Dismiss All",t.style.cssText=`
                        position: absolute;
                        right: 20px;
                        background: rgba(30, 30, 30, 0.9);
                        color: white;
                        padding: 8px 16px;
                        border-radius: 6px;
                        border: 1px solid rgba(255, 255, 255, 0.2);
                        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
                        z-index: 10100;
                        font-size: 12px;
                        cursor: pointer;
                        pointer-events: auto;
                        transition: background 0.2s, bottom 0.5s ease-out;
                    `,t.onmouseover=()=>{t.style.background="rgba(50, 50, 50, 0.9)"},t.onmouseout=()=>{t.style.background="rgba(30, 30, 30, 0.9)"},t.onclick=()=>this._requestDismissAllToasts(),e.appendChild(t)),n.length>0){const s=n[n.length-1],i=parseInt(s.element.style.bottom),r=s.element.offsetHeight;t.style.bottom=`${i+r+10}px`}}else t&&t.remove()},async confirm(e,t={}){const{confirmText:n="Confirm",cancelText:s="Cancel",type:i="danger"}=t;return new Promise(r=>{const o=document.createElement("div");o.className="enhancements-confirm-overlay",o.style.cssText=`
                    position: fixed;
                    top: 0;
                    left: 0;
                    right: 0;
                    bottom: 0;
                    background: rgba(0, 0, 0, 0.5);
                    z-index: 1000000;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    animation: fadeIn 0.2s ease-out;
                `;const d=document.createElement("div");d.className="enhancements-confirm-dialog",d.style.cssText=`
                    background: #2d2d30;
                    border: 1px solid #444;
                    border-radius: 8px;
                    padding: 24px;
                    min-width: 400px;
                    max-width: 500px;
                    box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);
                    animation: slideDown 0.2s ease-out;
                `;const c=document.createElement("div");c.textContent=e,c.style.cssText=`
                    color: #e9ecef;
                    font-size: 16px;
                    margin-bottom: 24px;
                    line-height: 1.5;
                `;const a=document.createElement("div");a.style.cssText=`
                    display: flex;
                    gap: 12px;
                    justify-content: flex-end;
                `;const p=document.createElement("button");p.textContent=s,p.style.cssText=`
                    background: transparent;
                    border: 1px solid #555;
                    color: #e9ecef;
                    padding: 8px 20px;
                    border-radius: 4px;
                    cursor: pointer;
                    font-size: 14px;
                    font-weight: 500;
                    transition: all 0.2s;
                `,p.onmouseover=()=>{p.style.background="#3a3a3a"},p.onmouseout=()=>{p.style.background="transparent"};const u=document.createElement("button");u.textContent=n;const f=i==="danger"?"#dc3545":"#0d6efd",E=i==="danger"?"#bb2d3b":"#0b5ed7";if(u.style.cssText=`
                    background: ${f};
                    border: 1px solid ${f};
                    color: white;
                    padding: 8px 20px;
                    border-radius: 4px;
                    cursor: pointer;
                    font-size: 14px;
                    font-weight: 500;
                    transition: all 0.2s;
                `,u.onmouseover=()=>{u.style.background=E,u.style.borderColor=E},u.onmouseout=()=>{u.style.background=f,u.style.borderColor=f},!document.getElementById("enhancements-confirm-style")){const h=document.createElement("style");h.id="enhancements-confirm-style",h.textContent=`
                        @keyframes fadeIn {
                            from { opacity: 0; }
                            to { opacity: 1; }
                        }
                        @keyframes slideDown {
                            from { opacity: 0; transform: translateY(-20px); }
                            to { opacity: 1; transform: translateY(0); }
                        }
                        @keyframes fadeOut {
                            from { opacity: 1; }
                            to { opacity: 0; }
                        }
                    `,document.head.appendChild(h)}const w=h=>{o.style.animation="fadeOut 0.15s ease-out",setTimeout(()=>{o.remove(),r(h)},150)};p.addEventListener("click",()=>w(!1)),u.addEventListener("click",()=>w(!0)),o.addEventListener("click",h=>{h.target===o&&w(!1)});const x=h=>{h.key==="Escape"&&(document.removeEventListener("keydown",x),w(!1))};document.addEventListener("keydown",x),a.appendChild(p),a.appendChild(u),d.appendChild(c),d.appendChild(a),o.appendChild(d),document.body.appendChild(o),u.focus()})},scanDOM(e="#expert-enhancements-overlay *"){const t={classes:new Map,ids:new Set,dataAttributes:new Set},n=`*:not(${e})`;return document.querySelectorAll(n).forEach(i=>{i.classList&&i.classList.length>0&&i.classList.forEach(r=>{const o=t.classes.get(r)||0;t.classes.set(r,o+1)}),i.id&&i.id.length>0&&t.ids.add(i.id),i.attributes&&Array.from(i.attributes).forEach(r=>{r.name.startsWith("data-")&&t.dataAttributes.add(r.name)})}),t},showInlineConfirmation(e,t){e.classList.add("confirming");const n=e.textContent,s=e.style.color,i=e.offsetHeight+"px",r=e.style.minHeight;e.innerHTML="",e.style.display="flex",e.style.alignItems="stretch",e.style.gap="0",e.style.justifyContent="space-between",e.style.padding="0",e.style.height=i,e.style.minHeight=i;const o=document.createElement("span");o.textContent="Confirm?",o.style.fontSize="0.7rem",o.style.display="flex",o.style.alignItems="center",o.style.paddingLeft="1rem",o.style.paddingRight="0.5rem",o.style.flex="1";const d=document.createElement("span");d.style.display="flex",d.style.alignItems="stretch",d.style.marginLeft="auto";const c=document.createElement("span");c.textContent="âœ“",c.className="confirm-tick",c.style.cursor="pointer",c.style.padding="0 0.75rem",c.style.borderRadius="0",c.style.background="rgba(76, 175, 80, 0.2)",c.style.color="#4caf50",c.style.fontWeight="bold",c.style.display="flex",c.style.alignItems="center",c.style.justifyContent="center",c.style.minWidth="2.5rem",c.style.transition="all 0.15s";const a=document.createElement("span");a.textContent="Ã—",a.className="confirm-cross",a.style.cursor="pointer",a.style.padding="0 0.75rem",a.style.borderRadius="0",a.style.background="rgba(244, 67, 54, 0.2)",a.style.color="#f44336",a.style.fontWeight="bold",a.style.fontSize="1.2rem",a.style.lineHeight="1",a.style.display="flex",a.style.alignItems="center",a.style.justifyContent="center",a.style.minWidth="2.5rem",a.style.transition="all 0.15s",c.addEventListener("mouseenter",()=>{c.style.background="rgba(76, 175, 80, 0.35)"}),c.addEventListener("mouseleave",()=>{c.style.background="rgba(76, 175, 80, 0.2)"}),a.addEventListener("mouseenter",()=>{a.style.background="rgba(244, 67, 54, 0.35)"}),a.addEventListener("mouseleave",()=>{a.style.background="rgba(244, 67, 54, 0.2)"}),d.appendChild(c),d.appendChild(a),e.appendChild(o),e.appendChild(d);const p=()=>{e.classList.remove("confirming"),e.textContent=n,e.style.color=s,e.style.display="",e.style.alignItems="",e.style.gap="",e.style.justifyContent="",e.style.padding="",e.style.height="",e.style.minHeight=r};c.addEventListener("click",f=>{f.stopPropagation(),p(),t()}),a.addEventListener("click",f=>{f.stopPropagation(),p()});const u=f=>{e.contains(f.target)||(p(),document.removeEventListener("click",u))};setTimeout(()=>{document.addEventListener("click",u)},100)},showNoChangesMessage(e){e.classList.add("showing-no-changes");const t=e.textContent,n=e.style.color,s=e.offsetHeight+"px",i=e.style.minHeight,r=e.style.fontSize,o=e.style.background;e.innerHTML="",e.style.display="flex",e.style.alignItems="center",e.style.justifyContent="flex-start",e.style.padding="0.5rem 0.75rem",e.style.height=s,e.style.minHeight=s,e.style.color="#ff9800",e.style.cursor="default",e.textContent="No changes",e.style.background="rgba(255, 152, 0, 0.15)",e.style.transition="background 0.3s ease",setTimeout(()=>{e.style.background=o},300);const d=()=>{e.classList.remove("showing-no-changes"),e.textContent=t,e.style.color=n,e.style.display="",e.style.alignItems="",e.style.justifyContent="",e.style.padding="",e.style.height="",e.style.minHeight=i,e.style.fontSize=r,e.style.cursor="",e.style.background=o,e.style.transition=""};setTimeout(()=>{d()},2e3);const c=a=>{e.contains(a.target)||(d(),document.removeEventListener("click",c))};setTimeout(()=>{document.addEventListener("click",c)},100)}};let g=null,_=null,P=null,V=null;const L={show(e="Loading...",t={}){const{timeout:n=3e4,showProgress:s=!0,onTimeout:i=null}=t;this.hide(),g=document.createElement("div"),g.className="enhancements-loading-overlay",g.setAttribute("role","status"),g.setAttribute("aria-live","polite"),g.setAttribute("aria-label",e),g.innerHTML=`
                <div class="loading-content">
                    <div class="loading-spinner"></div>
                    <div class="loading-message">${e}</div>
                    <div class="loading-progress" style="display: none;">
                        <div class="loading-progress-bar">
                            <div class="loading-progress-fill"></div>
                        </div>
                        <div class="loading-elapsed">0s</div>
                    </div>
                </div>
            `,(document.getElementById("expert-enhancements-overlay-content")||document.body).appendChild(g),V=Date.now(),s&&(P=setInterval(()=>{const d=Math.floor((Date.now()-V)/1e3),c=g.querySelector(".loading-progress"),a=g.querySelector(".loading-elapsed");d>=2&&c&&(c.style.display="block"),a&&(a.textContent=`${d}s`);const p=g.querySelector(".loading-progress-fill");if(p&&d>=2){const u=Math.min(90,30+(d-2)*8);p.style.width=`${u}%`}},500)),n>0&&(_=setTimeout(()=>{console.error("[LoadingOverlay] Timeout reached"),this.showError("Loading is taking longer than expected. Please refresh the page or try again later."),i&&i()},n)),console.log("[LoadingOverlay] Shown:",e)},setMessage(e){if(!g)return;const t=g.querySelector(".loading-message");t&&(t.textContent=e,g.setAttribute("aria-label",e))},setProgress(e){if(!g)return;const t=g.querySelector(".loading-progress-fill"),n=g.querySelector(".loading-progress");t&&n&&(n.style.display="block",t.style.width=`${Math.min(100,Math.max(0,e))}%`)},hide(){_&&(clearTimeout(_),_=null),P&&(clearInterval(P),P=null),g&&(g.style.opacity="0",g.style.pointerEvents="none",setTimeout(()=>{g&&g.parentNode&&g.remove(),g=null,V=null},300))},showError(e){if(!g)return;const t=g.querySelector(".loading-content");t&&(t.innerHTML=`
                    <div class="loading-error-icon">âš </div>
                    <div class="loading-message error">${e}</div>
                    <button class="loading-retry-btn" onclick="window.location.reload()">Reload Page</button>
                `,g.classList.add("error")),P&&(clearInterval(P),P=null),console.error("[LoadingOverlay] Error shown:",e)},isShown(){return g!==null}},m={create(e,t={},n=[]){const s=document.createElement(e);return Object.entries(t).forEach(([i,r])=>{i==="style"&&typeof r=="object"?Object.assign(s.style,r):i==="className"?s.className=r:s.setAttribute(i,r)}),n.forEach(i=>{typeof i=="string"?s.appendChild(document.createTextNode(i)):i instanceof HTMLElement&&s.appendChild(i)}),s}};let D=!1,Z=[],O=null;const K={async init(){if(D)return!0;if(O)throw O;return new Promise((e,t)=>{console.log("[Formatter] Loading Prettier from CDN...");const n=window.define,s=window.require;console.log("[Formatter] Temporarily hiding AMD to avoid Monaco conflict"),window.define=void 0,window.require=void 0;const i=(o,d,c=6e4)=>new Promise((a,p)=>{const u=Date.now();let f=50;const E=2e3;let w=0;const x=()=>{w++;const h=Date.now()-u;o()?(console.log(`[Formatter] ${d} is ready (${w} attempts, ${h}ms elapsed)`),a()):h>=c?p(new Error(`${d} not found after ${h}ms (${w} attempts)`)):(setTimeout(x,f),f=Math.min(f*2,E))};x()}),r=document.createElement("script");r.src="https://unpkg.com/prettier@3.6.2/standalone.js",r.onload=async()=>{console.log("[Formatter] Prettier standalone script loaded"),n&&(window.define=n),s&&(window.require=s),console.log("[Formatter] AMD restored after standalone load");try{console.log("[Formatter] Loading plugin scripts..."),window.define=void 0,window.require=void 0;const o=document.createElement("script");o.src="https://unpkg.com/prettier@3.6.2/plugins/postcss.js";const d=new Promise((p,u)=>{o.onload=()=>{console.log("[Formatter] PostCSS plugin script loaded"),n&&(window.define=n),s&&(window.require=s),p()},o.onerror=()=>{n&&(window.define=n),s&&(window.require=s),u(new Error("Failed to load PostCSS plugin"))}});document.head.appendChild(o),await d,window.define=void 0,window.require=void 0;const c=document.createElement("script");c.src="https://unpkg.com/prettier@3.6.2/plugins/html.js";const a=new Promise((p,u)=>{c.onload=()=>{console.log("[Formatter] HTML plugin script loaded"),n&&(window.define=n),s&&(window.require=s),p()},c.onerror=()=>{n&&(window.define=n),s&&(window.require=s),u(new Error("Failed to load HTML plugin"))}});document.head.appendChild(c),await a,console.log("[Formatter] All plugin scripts loaded, waiting for globals..."),await i(()=>window.prettier,"window.prettier"),await i(()=>window.prettierPlugins&&window.prettierPlugins.postcss,"prettierPlugins.postcss"),await i(()=>window.prettierPlugins&&window.prettierPlugins.html,"prettierPlugins.html"),console.log("[Formatter] All Prettier components loaded successfully"),console.log("[Formatter] Prettier version:",window.prettier.version),console.log("[Formatter] Available plugins:",Object.keys(window.prettierPlugins||{})),D=!0,Z.forEach(p=>p()),Z=[],e(!0)}catch(o){console.error("[Formatter] Error during initialization:",o),n&&(window.define=n),s&&(window.require=s),O=o,t(o)}},r.onerror=()=>{const o=new Error("Failed to load Prettier standalone script");console.error("[Formatter]",o),n&&(window.define=n),s&&(window.require=s),O=o,t(o)},document.head.appendChild(r)})},isReady(){return D},onReady(e){D?e():Z.push(e)},async formatCSS(e){if(!D)throw new Error("Prettier not loaded. Call Formatter.init() first.");if(!window.prettier)throw new Error("Prettier global not found");if(!window.prettierPlugins)throw new Error("Prettier plugins not found");try{const t=v.getFormatterSettings(),n={parser:"css",plugins:prettierPlugins,useTabs:t.indentStyle==="tabs",tabWidth:t.indentSize,singleQuote:t.quoteStyle==="single",...t.cssSettings},s=await prettier.format(e,n);return console.log("[Formatter] CSS formatted successfully"),s.endsWith(`
`)?s.slice(0,-1):s}catch(t){throw console.error("[Formatter] CSS formatting failed:",t),new Error(`CSS formatting failed: ${t.message}`)}},async formatHTML(e){if(!D)throw new Error("Prettier not loaded. Call Formatter.init() first.");if(!window.prettier)throw new Error("Prettier global not found");if(!window.prettierPlugins)throw new Error("Prettier plugins not found");try{const t=v.getFormatterSettings(),n={parser:"html",plugins:prettierPlugins,useTabs:t.indentStyle==="tabs",tabWidth:t.indentSize,singleQuote:t.quoteStyle==="single",...t.htmlSettings},s=await prettier.format(e,n);return console.log("[Formatter] HTML formatted successfully"),s.endsWith(`
`)?s.slice(0,-1):s}catch(t){throw console.error("[Formatter] HTML formatting failed:",t),new Error(`HTML formatting failed: ${t.message}`)}},getSettings(){return v.getFormatterSettings()},setSettings(e){v.setFormatterSettings(e),console.log("[Formatter] Settings updated:",e)}};let l=null,A=null,F=null,W=!1,j=!1,ee=0,te=0,ne=0,se=0,U=0,oe=0,ie=0,re=0,k=null,T=!1,C=null,I=null;const z={create(){l=m.create("div",{id:"expert-enhancements-overlay"}),A=m.create("div",{id:"expert-enhancements-overlay-header"});const e=m.create("div",{className:"header-left"}),t=m.create("span",{className:"header-title"},["CXone Expert Enhancements"]),n=m.create("select",{className:"app-switcher",id:"app-switcher"});n.addEventListener("change",$=>{y.switchTo($.target.value)}),e.appendChild(t),e.appendChild(n);const s=m.create("div",{className:"app-controls-container",id:"app-controls-container"});e.appendChild(s);const i=m.create("div",{className:"header-buttons"}),r=m.create("div",{className:"preset-buttons"}),o=m.create("button",{className:"header-btn preset-btn",title:"Small (50%)"});o.textContent="â–¢",o.addEventListener("click",()=>this.applyPresetSize("small")),I=m.create("button",{className:"header-btn preset-btn",title:"Fullscreen (95%)"}),I.textContent="â›¶",I.addEventListener("click",()=>this.applyPresetSize("fullscreen"));const d=m.create("button",{className:"header-btn preset-btn split-btn"}),c=m.create("span",{className:"split-half split-left",title:"Split Left (30%)"}),a=m.create("span",{className:"split-indicator"});c.appendChild(a),c.addEventListener("click",$=>{$.stopPropagation(),this.applyPresetSize("split-left")});const p=m.create("span",{className:"split-half split-right",title:"Split Right (30%)"}),u=m.create("span",{className:"split-indicator"});p.appendChild(u),p.addEventListener("click",$=>{$.stopPropagation(),this.applyPresetSize("split-right")}),d.appendChild(c),d.appendChild(p),r.appendChild(o),r.appendChild(I),r.appendChild(d);const f=m.create("button",{className:"header-btn",title:"Minimize"});f.textContent="âˆ’",f.addEventListener("click",()=>this.toggle()),i.appendChild(r),i.appendChild(f),A.appendChild(e),A.appendChild(i),F=m.create("div",{id:"expert-enhancements-overlay-content"});const E=m.create("div",{className:"enhancements-resize-handle left"}),w=m.create("div",{className:"enhancements-resize-handle right"}),x=m.create("div",{className:"enhancements-resize-handle bottom"}),h=m.create("div",{className:"enhancements-resize-handle corner-right"}),B=m.create("div",{className:"enhancements-resize-handle corner-left"});l.appendChild(A),l.appendChild(F),l.appendChild(E),l.appendChild(w),l.appendChild(x),l.appendChild(h),l.appendChild(B),document.body.appendChild(l),l.addEventListener("wheel",$=>{$.stopPropagation()},{passive:!0}),y.setContainer(F),this.attachDragListeners(),this.attachResizeListeners(E,w,x,h,B),this.attachWindowResizeListener(),this.setupDropZone(),this.restoreDimensions(),requestAnimationFrame(()=>{requestAnimationFrame(()=>{this.checkPresetButtonsVisibility()})})},attachDragListeners(){A.addEventListener("mousedown",e=>{if(e.target.tagName==="BUTTON"||e.target.tagName==="SELECT")return;W=!0,ee=e.clientX,te=e.clientY;const t=l.getBoundingClientRect();ne=t.left,se=t.top,A.style.cursor="grabbing",e.preventDefault()}),document.addEventListener("mousemove",e=>{if(!W)return;const t=e.clientX-ee,n=e.clientY-te;l.style.left=ne+t+"px",l.style.top=se+n+"px",l.style.transform="none"}),document.addEventListener("mouseup",()=>{W&&(W=!1,A.style.cursor="move",this.saveDimensions())}),A.addEventListener("dblclick",e=>{e.target.tagName==="BUTTON"||e.target.tagName==="SELECT"||this.toggleFullscreen()})},attachResizeListeners(e,t,n,s,i){let r=0,o=0;const d=()=>{const a=y.getCurrentApp(),p={minWidth:420,minHeight:300};return a?.constraints?{...p,...a.constraints}:p},c=(a,p)=>{T&&(T=!1,C=null,v.setCommonState({isFullscreen:!1,preFullscreenDimensions:null})),j=!0,k=p,ie=a.clientX,re=a.clientY;const u=l.getBoundingClientRect();U=u.width,oe=u.height,r=u.left,o=u.top,a.target.classList.add("resizing"),a.preventDefault()};e.addEventListener("mousedown",a=>c(a,"left")),t.addEventListener("mousedown",a=>c(a,"right")),n.addEventListener("mousedown",a=>c(a,"bottom")),s.addEventListener("mousedown",a=>c(a,"corner-right")),i.addEventListener("mousedown",a=>c(a,"corner-left")),document.addEventListener("mousemove",a=>{if(!j)return;const p=a.clientX-ie,u=a.clientY-re,f=window.innerWidth,E=window.innerHeight,w=d();if(k==="right"||k==="corner-right"){const x=f-r,h=Math.max(w.minWidth,Math.min(U+p,x));l.style.width=h+"px"}if(k==="left"||k==="corner-left"){let x=U-p,h=r+p;const B=r+U;h=Math.max(0,Math.min(h,B-w.minWidth)),x=B-h,x<w.minWidth&&(x=w.minWidth,h=B-w.minWidth),l.style.width=x+"px",l.style.left=h+"px",l.style.transform="none"}if(k==="bottom"||k==="corner-right"||k==="corner-left"){const x=E-o,h=Math.max(w.minHeight,Math.min(oe+u,x));l.style.height=h+"px"}y.notifyResize(),this.checkPresetButtonsVisibility()}),document.addEventListener("mouseup",()=>{j&&(document.querySelectorAll(".enhancements-resize-handle").forEach(a=>{a.classList.remove("resizing")}),j=!1,k=null,this.saveDimensions(),y.notifyResize(),this.checkPresetButtonsVisibility())})},attachWindowResizeListener(){window.addEventListener("resize",()=>{T&&this.applyFullscreen()})},setupDropZone(){if(!F)return;const e=m.create("div",{id:"file-drop-zone"});e.style.cssText=`
                position: absolute;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background: rgba(255, 255, 255, 0.1);
                backdrop-filter: blur(4px);
                z-index: 100000;
                display: none;
                align-items: center;
                justify-content: center;
                pointer-events: none;
            `;const t=m.create("div",{className:"drop-zone-content"}),n=m.create("div",{className:"drop-icon"},["ðŸ“"]),s=m.create("div",{className:"drop-text"},["Drop your file here"]),i=m.create("div",{className:"drop-subtext"},["Supports .css and .html files"]);t.appendChild(n),t.appendChild(s),t.appendChild(i),e.appendChild(t),F.appendChild(e),console.log("[Drop Zone] Created and appended, initial display:",e.style.display),console.log("[Drop Zone] Parent:",e.parentElement?.id),console.log("[Drop Zone] Has children:",e.children.length);let r=0;F.addEventListener("dragenter",o=>{o.preventDefault(),r++,r===1&&(e.style.display="flex",e.style.pointerEvents="auto",e.style.opacity="1",e.style.visibility="visible")},!0),F.addEventListener("dragover",o=>{o.preventDefault()},!0),F.addEventListener("dragleave",o=>{o.preventDefault(),r--,r===0&&(e.style.display="none",e.style.pointerEvents="none")},!0),F.addEventListener("drop",o=>{o.preventDefault(),r=0,e.style.display="none",e.style.pointerEvents="none";const d=o.dataTransfer.files;d&&d.length>0&&Q.handleDrop(d)},!0),document.addEventListener("keydown",o=>{o.key==="Escape"&&e.style.display==="flex"&&(r=0,e.style.display="none",e.style.pointerEvents="none")})},toggle(){if(!l)return;const e=l.style.display==="flex";l.style.display=e?"none":"flex",v.setCommonState({overlayOpen:!e}),e||setTimeout(()=>{y.notifyResize(),this.checkPresetButtonsVisibility()},50)},saveDimensions(){if(!l)return;const e={width:l.style.width,height:l.style.height,left:l.style.left,top:l.style.top};v.setCommonState({overlayDimensions:e})},restoreDimensions(){if(!l)return;const e=v.getCommonState();if(e.isFullscreen){T=!0,C=e.preFullscreenDimensions||null,this.applyFullscreen(),this.updateFullscreenButtonState(),setTimeout(()=>this.checkPresetButtonsVisibility(),100);return}const t=e.overlayDimensions;t&&(t.width&&(l.style.width=t.width),t.height&&(l.style.height=t.height),t.left&&(l.style.left=t.left,l.style.transform="none"),t.top&&(l.style.top=t.top,l.style.transform="none")),setTimeout(()=>this.checkPresetButtonsVisibility(),100)},toggleFullscreen(){l&&(T?this.exitFullscreen():this.enterFullscreen())},enterFullscreen(){l&&(C={width:l.style.width,height:l.style.height,left:l.style.left,top:l.style.top,transform:l.style.transform},this.applyFullscreen(),T=!0,this.updateFullscreenButtonState(),v.setCommonState({isFullscreen:!0,preFullscreenDimensions:C}),setTimeout(()=>{y.notifyResize(),this.checkPresetButtonsVisibility()},50))},exitFullscreen(){!l||!C||(l.style.width=C.width,l.style.height=C.height,l.style.left=C.left,l.style.top=C.top,l.style.transform=C.transform,T=!1,C=null,this.updateFullscreenButtonState(),v.setCommonState({isFullscreen:!1,preFullscreenDimensions:null}),setTimeout(()=>{y.notifyResize(),this.checkPresetButtonsVisibility()},50))},applyFullscreen(){l&&(l.style.width="95vw",l.style.height="95vh",l.style.left="2.5vw",l.style.top="2.5vh",l.style.transform="none")},updateFullscreenButtonState(){I&&(T?I.classList.add("fullscreen-active"):I.classList.remove("fullscreen-active"))},applyPresetSize(e){if(!l)return;console.log(`[Overlay] Applying preset size: ${e}`),T&&e!=="fullscreen"&&(T=!1,C=null,this.updateFullscreenButtonState(),v.setCommonState({isFullscreen:!1,preFullscreenDimensions:null}));const t=y.getCurrentApp(),n={minWidth:420,minHeight:300},s=t?.constraints?{...n,...t.constraints}:n,i=window.innerWidth,r=window.innerHeight;switch(e){case"small":const o=Math.max(i*.5,s.minWidth),d=Math.max(r*.5,s.minHeight);l.style.width=o+"px",l.style.height=d+"px",l.style.left=(i-o)/2+"px",l.style.top=(r-d)/2+"px",l.style.transform="none";break;case"fullscreen":if(T){this.exitFullscreen();return}else{this.enterFullscreen();return}case"split-left":const c=Math.max(i*.3,s.minWidth),a=Math.max(r*.95,s.minHeight);l.style.width=c+"px",l.style.height=a+"px",l.style.left=i*.025+"px",l.style.top=(r-a)/2+"px",l.style.transform="none";break;case"split-right":const p=Math.max(i*.3,s.minWidth),u=Math.max(r*.95,s.minHeight);l.style.width=p+"px",l.style.height=u+"px",l.style.left=i-p-i*.025+"px",l.style.top=(r-u)/2+"px",l.style.transform="none";break;default:console.warn(`[Overlay] Unknown preset: ${e}`);return}this.saveDimensions(),setTimeout(()=>{y.notifyResize()},50),this.checkPresetButtonsVisibility()},checkPresetButtonsVisibility(){if(!l)return;const e=document.querySelector(".preset-buttons");if(!e)return;l.offsetWidth<620?e.style.display!=="none"&&(e.style.display="none"):e.style.display!=="flex"&&(e.style.display="flex")},updateAppSwitcher(){const e=document.getElementById("app-switcher");if(!e)return;e.innerHTML="",y.getApps().forEach(n=>{const s=m.create("option",{value:n.id},[n.name]);e.appendChild(s)});const t=y.getCurrentApp();t&&(e.value=t.id)},setAppControls(e){const t=document.getElementById("app-controls-container");t&&(t.innerHTML="",Array.isArray(e)&&e.forEach(n=>t.appendChild(n)))},clearAppControls(){const e=document.getElementById("app-controls-container");e&&(e.innerHTML="")}},Q={async handleDrop(e){if(e.length>1){S.showToast("Please drop only one file at a time","error");return}const t=e[0],n=t.name.toLowerCase().split(".").pop();if(n!=="css"&&n!=="html"){S.showToast("Please drop a .css or .html file","error");return}const s=5*1024*1024;if(t.size>s){S.showToast(`File too large. Maximum size is 5MB (file is ${(t.size/1024/1024).toFixed(2)}MB)`,"error");return}if(t.size===0){S.showToast("Cannot import empty file","error");return}const i=n==="css"?"css-editor":"html-editor",r=y.getCurrentApp();if(!r||r.id!==i){S.showToast(`Switching to ${n.toUpperCase()} Editor...`,"info",2e3);try{await y.switchTo(i),await new Promise(o=>setTimeout(o,100)),y.notifyResize()}catch(o){S.showToast(`Failed to switch to ${n.toUpperCase()} Editor: ${o.message}`,"error");return}}L.show(`Reading ${t.name}...`);try{const o=await this.readFileAsText(t),d=y.getCurrentApp();if(d&&typeof d.importFile=="function"){await d.importFile(o,t.name);const c=document.getElementById("file-drop-zone");c&&(c.style.display="none",c.style.pointerEvents="none"),document.querySelectorAll(".role-selector-backdrop").forEach(p=>{p.parentNode&&p.parentNode.removeChild(p)})}else L.hide(),S.showToast("Current app does not support file import","error")}catch(o){L.hide(),S.showToast(`Failed to read file: ${o.message}`,"error")}},readFileAsText(e){return new Promise((t,n)=>{const s=new FileReader;s.onload=i=>t(i.target.result),s.onerror=()=>n(new Error("Failed to read file")),s.readAsText(e)})},showRoleSelector(e,t){return new Promise(n=>{const s=m.create("div",{className:"role-selector-backdrop",style:"position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 9999999; display: flex; align-items: center; justify-content: center;"}),i=m.create("div",{className:"role-selector-dialog",style:"background: white; padding: 20px; border-radius: 8px; box-shadow: 0 4px 12px rgba(0,0,0,0.3); max-width: 400px; width: 90%;"}),r=m.create("h3",{style:"margin: 0 0 16px 0; font-size: 18px; color: #333;"},[`Import ${t.toUpperCase()} File`]),o=m.create("p",{style:"margin: 0 0 16px 0; font-size: 14px; color: #666;"},["Select which editor to import into:"]),d=m.create("form");e.forEach((f,E)=>{const w=m.create("label",{style:"display: flex; align-items: center; margin-bottom: 12px; cursor: pointer; font-size: 14px; color: #333;"}),x=m.create("input",{type:"radio",name:"role",value:f.id,style:"margin-right: 8px;"});E===0&&(x.checked=!0);const h=document.createTextNode(f.label);w.appendChild(x),w.appendChild(h),d.appendChild(w)});const c=m.create("div",{style:"display: flex; gap: 8px; justify-content: flex-end; margin-top: 20px;"}),a=m.create("button",{type:"button",style:"padding: 8px 16px; border: 1px solid #ccc; background: white; color: #333; border-radius: 4px; cursor: pointer; font-size: 14px;"},["Cancel"]),p=m.create("button",{type:"submit",style:"padding: 8px 16px; border: none; background: #2196F3; color: white; border-radius: 4px; cursor: pointer; font-size: 14px;"},["Import"]),u=()=>{try{s.parentNode&&s.parentNode.removeChild(s)}catch(f){console.error("[FileImport] Error removing dialog:",f)}};a.addEventListener("click",()=>{u(),n(null)}),d.addEventListener("submit",f=>{f.preventDefault();const E=d.querySelector('input[name="role"]:checked').value;u(),n(E)}),c.appendChild(a),c.appendChild(p),d.appendChild(c),i.appendChild(r),i.appendChild(o),i.appendChild(d),s.appendChild(i),document.body.appendChild(s),d.querySelector('input[type="radio"]').focus()})}},ae="1.0.0";console.log("[Enhancements Core] Initialized successfully"),window.ExpertEnhancements={AppManager:y,Monaco:X,API:G,Storage:v,UI:S,DOM:m,Overlay:z,LoadingOverlay:L,FileImport:Q,Formatter:K,version:ae},console.log("[Expert Enhancements] Main entry point loading..."),console.log(`[Expert Enhancements] Core loaded (v${ae})`);async function ce(){console.log("[Expert Enhancements] Loading apps...");const e=[{name:"CSS Editor",path:"./css-editor.js"},{name:"HTML Editor",path:"./html-editor.js"},{name:"Settings",path:"./settings.js"}],t=await Promise.allSettled(e.map(async({name:o,path:d})=>{try{return await import(d),console.log(`[Expert Enhancements] âœ“ Loaded ${o}`),{success:!0,name:o,path:d}}catch(c){return console.error(`[Expert Enhancements] âœ— Failed to load ${o}:`,c),{success:!1,name:o,path:d,error:c.message}}})),n=t.filter(o=>o.status==="fulfilled"&&o.value.success),s=t.filter(o=>o.status==="rejected"||o.status==="fulfilled"&&!o.value.success);console.log(`[Expert Enhancements] App loading complete: ${n.length} succeeded, ${s.length} failed`),s.length>0&&console.warn("[Expert Enhancements] Failed apps:",s.map(o=>o.status==="fulfilled"?o.value.name:"unknown"));const i=y.getApps();console.log(`[Expert Enhancements] ${i.length} app(s) registered:`,i.map(o=>o.name).join(", ")||"none");const r=y.getFailedApps();return r.length>0&&console.warn("[Expert Enhancements] Failed registrations:",r),{successful:n.length,failed:s.length,registered:i.length}}function de(){return new Promise((e,t)=>{const n=window.define,s=window.require;console.log("[Expert Enhancements] Temporarily hiding AMD for Monaco loader"),delete window.define,delete window.require;const i=document.createElement("script");i.src="https://cdn.jsdelivr.net/npm/monaco-editor@0.44.0/min/vs/loader.js",i.onload=()=>{console.log("[Expert Enhancements] Monaco loader loaded, restoring page AMD"),n&&(window.define=n),s&&(window.require=s),window.monacoRequire=require,console.log("[Expert Enhancements] Page AMD restored, Monaco require stored"),e()},i.onerror=()=>{console.error("[Expert Enhancements] Failed to load Monaco loader"),n&&(window.define=n),s&&(window.require=s),t(new Error("Failed to load Monaco loader"))},document.head.appendChild(i)})}function pe(){return new Promise(e=>{const t=document.getElementsByTagName("script"),n=Array.from(t).find(r=>r.src&&r.src.includes("embed"));let s;if(n&&n.src){const r=n.src;s=`${r.substring(0,r.lastIndexOf("/"))}/core.css`}else s="core.css";console.log("[Expert Enhancements] Loading CSS:",s);const i=document.createElement("link");i.rel="stylesheet",i.href=s,i.onload=()=>{console.log("[Expert Enhancements] CSS loaded"),e()},i.onerror=()=>{console.warn("[Expert Enhancements] CSS failed to load, continuing anyway"),e()},document.head.appendChild(i)})}async function le(){try{console.log("[Expert Enhancements] Initializing UI...");const e=await ce();e.registered===0&&console.error("[Expert Enhancements] No apps registered! Widget cannot function."),await pe(),await de(),console.log("[Expert Enhancements] Pre-loading Monaco..."),await X.init(),console.log("[Expert Enhancements] Monaco ready"),me(),z.create(),z.updateAppSwitcher();const t=v.getCommonState(),n=t.lastActiveApp||"css-editor";console.log("[Expert Enhancements] Loading last active app:",n);let s=!1;t.overlayOpen&&(L.show("Initializing editor...",{timeout:3e4,showProgress:!0}),s=!0);let i=!1;if(e.registered>0&&(i=await y.switchTo(n),!i)){console.warn(`[Expert Enhancements] Failed to load last active app "${n}", trying first available app...`);const r=y.getFirstAvailableApp();r&&(console.log("[Expert Enhancements] Loading first available app:",r),i=await y.switchTo(r))}i||(console.error("[Expert Enhancements] Failed to load any app!"),s?L.showError("No apps available. Please refresh the page or contact support."):S.showToast("Failed to load any apps. Widget may not function correctly.","error",1e4)),t.overlayOpen&&(console.log("[Expert Enhancements] Restoring overlay open state"),setTimeout(()=>{z.toggle(),s&&setTimeout(()=>{L.hide()},500)},300)),console.log("[Expert Enhancements] Initialization complete!")}catch(e){console.error("[Expert Enhancements] Initialization failed:",e);try{L.isShown()&&L.showError(`Initialization failed: ${e.message}`)}catch(t){console.error("[Expert Enhancements] Failed to show error overlay:",t)}}}function me(){const e=document.createElement("button");e.id="expert-enhancements-toggle",e.innerHTML="&lt;/&gt;",e.title="CXone Expert Enhancements",e.style.cssText=`
        position: fixed;
        top: 15px;
        right: -45px;
        width: 100px;
        height: 50px;
        border-radius: 25px;
        background: #667eea;
        border: 3px solid white;
        color: white;
        font-size: 20px;
        font-weight: bold;
        font-family: monospace;
        cursor: pointer;
        z-index: 999998;
        box-shadow: -4px 4px 20px rgba(0, 0, 0, 0.3);
        transition: all 0.3s ease;
        display: flex;
        align-items: center;
        justify-content: left;
        padding-left: 12px;
        line-height: 1;
    `,e.addEventListener("mouseenter",()=>{e.style.transform="scale(1.1)",e.style.boxShadow="-6px 6px 30px rgba(102, 126, 234, 0.5)"}),e.addEventListener("mouseleave",()=>{e.style.transform="scale(1)",e.style.boxShadow="-4px 4px 20px rgba(0, 0, 0, 0.3)"}),e.addEventListener("click",()=>{z.toggle()}),document.body.appendChild(e),console.log("[Expert Enhancements] Toggle button created")}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",le):le()})();
//# sourceMappingURL=embed.js.map
